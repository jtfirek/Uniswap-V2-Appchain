# Uniswap V2 Style DEX Pallet

This DEX (Decentralized Exchange) Pallet is based on the Uniswap V2 design and allows users to trustlessly exchange tokens. It is implemented as a Substrate runtime pallet.

The DEX includes functionality to incentivize users to create liquidity pools and also provides a price oracle based on the existing liquidity pools.

The pallet exposes the following functionality through its API:

- `setup_account`: A helper function to setup an account so it can hold any number of assets.
- `mint_asset`: Mints a given amount of a specific asset for a user.
- `asset_balance`: Retrieves a user's balance for a specific asset.
- `swap_fee`: Returns the number of basis points (1/100) used for swap fees.
- `lp_id`: Get the LP Token ID that will be generated by creating a pool of `asset_a` and `asset_b`.
- `add_liquidity`: Adds liquidity to a pool on behalf of the user. If necessary, this will create the pool. LP tokens are minted to the caller.
- `remove_liquidity`: Removes liquidity from a pool on behalf of the user. The `token_amount` represents the amount of LP tokens to be burned in exchange for underlying assets.
- `swap_exact_in_for_out`: Swaps an exact amount of `asset_in` for a minimum amount of `asset_out` on behalf of `who`. The swap fee is deducted from the out amount.
- `swap_in_for_exact_out`: Swaps a max amount of `asset_in` for an exact amount of `asset_out` on behalf of `who`. The swap fee is added to the in amount.

```rust
pub trait DexInterface {
    type AccountId: Parameter + Member + MaybeSerializeDeserialize + Debug + Ord + MaxEncodedLen;
    type AssetId: AssetIdTrait;
    type AssetBalance: BalanceTrait;

    fn setup_account(who: Self::AccountId) -> DispatchResult;
    fn mint_asset(who: Self::AccountId, token_id: Self::AssetId, amount: Self::AssetBalance) -> DispatchResult;
    fn asset_balance(who: Self::AccountId, token_id: Self::AssetId) -> Self::AssetBalance;
    fn swap_fee() -> u16;
    fn lp_id(asset_a: Self::AssetId, asset_b: Self::AssetId) -> Self::AssetId;
    fn add_liquidity(who: Self::AccountId, asset_a: Self::AssetId, asset_b: Self::AssetId, amount_a: Self::AssetBalance, amount_b: Self::AssetBalance) -> DispatchResult;
    fn remove_liquidity(who: Self::AccountId, asset_a: Self::AssetId, asset_b: Self::AssetId, token_amount: Self::AssetBalance) -> DispatchResult;
    fn swap_exact_in_for_out(who: Self::AccountId, asset_in: Self::AssetId, asset_out: Self::AssetId, exact_in: Self::AssetBalance, min_out: Self::AssetBalance) -> DispatchResult;
    fn swap_in_for_exact_out(origin: Self::AccountId, asset_in: Self::AssetId, asset_out: Self::AssetId, max_in: Self::AssetBalance, exact_out: Self::AssetBalance) -> DispatchResult;
}
